<analysis>**original_problem_statement:**
The user requested a feature to clean up test data. This was initially implemented for orders and linked CRM data. The user then noted that test data in the Wallet and Users departments were not being included.

In a subsequent message, the user provided a screenshot of the Access Requests tab and asked why this data was also not being cleaned. They expanded the request to include User/ Solicitudes Vinculación (Linking Requests) and Todos los Estudiantes (All Students). The user also pointed out that some UI elements were displaying in Spanish even when the application language was set to English.

The agent investigated and found three key issues:
1.  The cleanup service only identified students who had placed an order, ignoring students who only had access/enrollment requests.
2.  The Users admin module contained hardcoded Spanish labels instead of using the internationalization (i18n) framework.
3.  The Access Requests tab did not use the common  component, leading to an inconsistent UI.

The agent was in the process of fixing all three issues when the session ended.

**User's preferred language**: English

**what currently exists?**
- A full-stack application (React/FastAPI/MongoDB).
- A Data Cleanup feature in the admin panel designed to reset test data.
- The cleanup feature is currently incomplete: it only finds students who have placed an order, missing those who only have access/linking requests.
- The Users section of the admin panel has UI/UX issues: hardcoded Spanish labels and an inconsistent header on the Access Requests tab.

**Last working item**:
-   **Last item agent was working:** The agent was performing a multi-part fix to enhance the Data Cleanup module and resolve UI issues in the Users admin section. The plan was to:
    1.  Modify the backend cleanup service to find *all* students, including those without orders.
    2.  Replace hardcoded Spanish labels in the Users admin module with translation keys.
    3.  Refactor the Access Requests tab to use the standard  for UI consistency.
-   **Status:** IN PROGRESS
-   **Agent Testing Done:** N
-   **Which testing method agent to use?** both. The backend change requires  or testing agent verification to ensure all students are now found. The frontend changes require  or the frontend testing agent to confirm UI consistency and correct language display.
-   **User Testing Done:** N

**All Pending/In progress Issue list**:
-   **Issue 1: Incomplete Data Cleanup and UI/i18n Bugs in Users Module (P0)**

**Issues Detail:**
-   **Issue 1:**
    -   **Description:** The data cleanup feature is not comprehensive, as it fails to list students who have only made access/linking requests but have never placed an order. Concurrently, the Users management section suffers from UI defects, including hardcoded Spanish text and inconsistent component usage.
    -   **Attempted fixes:** The agent identified the root causes by reviewing , , and . An initial  command was executed to start fixing the backend service logic.
    -   **Next debug checklist:**
        1.  Verify the backend fix in  was successful. The  method should now query the  collection directly to fetch all students, not just those linked to orders.
        2.  Apply the frontend fix in  by replacing hardcoded Spanish strings (Solicitudes Vinculación, Todos los Estudiantes) with translation keys (e.g., ).
        3.  Refactor  to implement the reusable  component, unifying the UI.
        4.  Test the complete flow: confirm the Data Cleanup preview now lists all test students (with and without orders) and that the Users admin UI displays correct English labels and a consistent header.
    -   **Why fix this issue and what will be achieved with the fix?** This will deliver a complete data reset tool as requested by the user, significantly improving the efficiency of their testing workflow. It also resolves critical UI and internationalization bugs, enhancing the overall quality of the admin panel.
    -   **Status:** IN PROGRESS
    -   **Is recurring issue?** N
    -   **Should Test frontend/backend/both after fix?** both
    -   **Blocked on other issue:** No.

**In progress Task List**:
-   **Task 1: Complete Users Module Cleanup and Refactor (P0)**
    -   **Where to resume:** The agent has already initiated the backend fix. The next step is to execute the planned changes on the frontend, starting with replacing the hardcoded Spanish labels in .
    -   **What will be achieved with this?** A fully functional and comprehensive data cleanup tool and a consistent, properly translated Users admin section.
    -   **Status:** IN PROGRESS
    -   **Should Test frontend/backend/both after fix?** both
    -   **Blocked on something:** No.

**Upcoming and Future Tasks**
-   **Upcoming Tasks:**
    -   **(P1)** Abstract the progress icon system into a global resource.
    -   **(P2)** Implement a Stop button for the full Monday.com sync operation.
-   **Future Tasks:**
    -   **(P3)** Build an on-demand landing page redesign tool.
    -   **(P4)** Extend Monday.com synchronization to the general product inventory.
    -   **(P5)** Implement push notifications for student access requests.

**Completed work in this session**
-   **Feature - Comprehensive Data Cleanup Module (DONE):** Built a backend service and frontend UI to preview and delete test data, including orders, students, CRM data, wallets, and users. Implemented safety checks to protect admin accounts.
-   **Feature - Monday.com Integration Enhancement (DONE):** Refactored the Monday.com integration to handle the one order per submission logic, add  to CRM messages for better tracking, and allow the admin chat to highlight the specific order topic.
-   **Bug Fix - Monday.com Label Mapping (DONE):** Corrected incorrect label mappings for grades and order statuses sent to the Monday.com API.
-   **Core Refactor - One Submission, One Order (DONE):** Re-architected the order submission workflow to create a new, separate order for every submission, correcting a fundamental business logic flaw. This included major changes to the backend and removing obsolete UI from the frontend.

**Earlier issues found/mentioned but not fixed**
None.

**Known issue recurrence from previous fork**
None.

**Code Architecture**


**Key Technical Concepts**
-   **Selective Data Deletion:** The  identifies interconnected test data across multiple MongoDB collections (, , , ) and deletes them, while programmatically protecting essential data like admin user accounts.
-   **Internationalization (i18n):** The current task involves fixing hardcoded text by replacing it with keys for a translation library (  function) to enable proper language switching.
-   **Component Reuse:** The task includes refactoring a UI tab to use the existing  component to enforce design consistency across the admin panel.

**key DB schema**
-   ****: Contains user enrollment and access requests. The cleanup tool is being modified to scan this collection directly to find all students, not just those with orders.
-   ****: Contains user accounts, targeted for deletion by the cleanup service.
-   ****, ****: Related to user balances, also targeted for cleanup.

**All files of reference**
-   **Critical for Next Task:**
    -    (Backend logic to fix)
    -    (UI with hardcoded labels to fix)
    -    (UI to refactor with )
-   **For Context:**
    -    (The main UI for the cleanup feature)

**Areas that need refactoring**:
-   : Needs i18n refactoring to remove hardcoded Spanish.
-   : Needs UI refactoring to incorporate the  component.

**key api endpoints**
-   : Previews all data entities that will be deleted.
-   : Executes the deletion of the selected data.
-   : Fetches the list of all students for the cleanup UI. The service logic for this endpoint is currently being fixed.

**Critical Info for New Agent**
-   Your immediate priority is to complete the in-progress fix for the **Users & Data Cleanup Module**.
-   The previous agent had already analyzed the problem and started the implementation. You need to pick up where they left off.
-   **Resume the plan:**
    1.  Ensure the backend change in  is correctly applied to find *all* students.
    2.  Proceed with the two frontend fixes: replacing hardcoded Spanish labels in  and applying the  to .
-   After implementing all three parts, perform a full end-to-end test to verify that the cleanup tool is comprehensive and the Users UI is correct.

**documents and test reports created in this job**
-   
-   Test reports are available in , such as .

**Last 10 User Messages and any pending HUMAN messages**
-   **User:** Asked why wallet and user test data were not included in the cleanup.
-   **Agent:** Agreed to extend the feature.
-   **User:** Provided a screenshot of Access Requests and asked why they weren't being cleaned up.
-   **User:** Pointed out that Spanish text was appearing in the UI.
-   **User:** Clarified that Solicitudes Vinculación and Todos los Estudiantes should also be part of the cleanup.
-   **Agent:** Confirmed understanding and began a thorough review of the Users module.
-   **Agent:** Identified the root causes: the cleanup service was only looking at students with orders, and the UI had hardcoded Spanish labels.
-   **Agent:** Began implementing the multi-part fix to address all identified issues.

**Project Health Check:**
-   **Broken:** The Data Cleanup feature is functionally incomplete as it misses a significant portion of test data. The Users admin section has UI bugs (hardcoded Spanish text and inconsistent styling).
-   **Mocked:** None.

**3rd Party Integrations**
-   Monday.com API v2
-   Google Photos, Gmail (IMAP)
-   Telegram Bot API
-   OpenAI GPT-4o, Anthropic Claude Sonnet 4.5, OpenAI Image Generation
-   Lottie (via  library)
-    (for fuzzy string matching)

**Testing status**
-   **Testing agent used after significant changes:** YES (on previous features)
-   **Troubleshoot agent used after agent stuck in loop:** NO
-   **Test files created:** None
-   **Known regressions:** None.

**Credentials to test flow:**
-   **Email:** 
-   **Password:** 

**What agent forgot to execute**
The previous agent correctly identified all aspects of the user's latest request and was actively implementing a comprehensive solution when the session ended. No tasks were forgotten.</analysis>
